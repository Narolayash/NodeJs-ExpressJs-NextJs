<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            height: 95vh;
            padding: 10px;
        }

        .gameZoneDiv {
            height: 100%;
        }

        #gameArea {
            height: 85%;
            position: relative;
            border: purple 1px solid;
        }
        /* snake img */
        #nagin {
            border: black 1px solid;
            height: 60px;
            position: absolute;
        }
        /* eatting item */
        #food {
            border: black 1px solid;
            height: 25px;
            position: absolute;
        }
        .board {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .controls {
            height: 13%;
            margin-top: 1%;
            text-align: center;
            vertical-align: bottom;
        }
        /* arrow Img */
        .arrowImg {
            height: 35px;
            width: 35px;
            vertical-align: middle;
        }
        /* arrow Button */
        .controlBtn {
            padding: 0px;
            border: 1px solid;
            height: 40px;
            width: 40px;
            margin: 2px;
        }
    </style>
</head>
<body>
    <div class="gameZoneDiv">
        <!-- Snake area  -->
        <div id="gameArea">
            <img id="nagin"  src="./IMGs/snakeIMGL.jpg" alt="nagin">
            <img id="food" src="./IMGs/banana.jpg" alt="banana">
        </div>

        <!-- score board, controls, lifes -->
        <div class="board">
            <div class="score">
                <h1>Score : <span id="countScore">0</span></h1>
            </div>
            <!-- game controls -->
            <div class="controls">
                <button onclick="startUp()" class="controlBtn"><img class="arrowImg" src="./IMGs/up-arrow.svg" alt="up"></button><br>
                <button onclick="startLeft()" class="controlBtn"><img class="arrowImg" src="./IMGs/left-arrow.svg" alt="left"></button>
                <button onclick="startDown()" class="controlBtn"><img class="arrowImg" src="./IMGs/down-arrow.svg" alt="down"></button>
                <button onclick="startRight()" class="controlBtn"><img class="arrowImg" src="./IMGs/right-arrow.svg" alt="right"></button>
            </div>
            <div class="life">
                <h1>Life : <span id="countLife">3</span></h1>
            </div>
        </div>
    </div>

    <script>
        // snake refference
        let snakeRef = document.getElementById("nagin");

        // food refference
        let foodRef = document.getElementById("food");

        // game Area refference
        const gameArea = document.getElementById("gameArea");

        // define current positions 
        let currentX = 0;
        let currentY = 0;
        let foodX = (Math.random())*(gameArea.clientWidth - foodRef.clientWidth);
        let foodY = (Math.random())*(gameArea.clientHeight - foodRef.clientHeight);

        // initial position (food)
        foodRef.style.left = foodX + 'px';
        foodRef.style.top = foodY + 'px';

        // clare Interval mate
        let clearInt = 0;

        // snake speed 
        let sSpeed = 10;

        // score
        let score = 0; 

        // Life
        let life = 3;

        // starter function 
        function startUp(){
            clearInterval(clearInt);
            snakeRef.src = "IMGs/snakeImgU.jpg";
            clearInt = setInterval(upSnake, sSpeed);
        }
        function startLeft(){
            clearInterval(clearInt);
            snakeRef.src = "IMGs/snakeImgL.jpg";
            clearInt = setInterval(leftSnake, sSpeed);
        }
        function startDown(){
            clearInterval(clearInt);
            snakeRef.src = "IMGs/snakeImgD.jpg";
            clearInt = setInterval(downSnake, sSpeed);
        }
        function startRight(){
            clearInterval(clearInt);
            snakeRef.src = "IMGs/snakeImgR.jpg";
            clearInt = setInterval(rightSnake, sSpeed);
        }

        // move logic functions
        function upSnake() {
            currentY--;
            snakeRef.style.top = currentY + 'px';
            checkLimit();
        }
        function leftSnake() {
            currentX--;
            snakeRef.style.left = currentX + 'px';
            checkLimit();
        }
        function downSnake() {
            currentY++;
            snakeRef.style.top = currentY + 'px';
            checkLimit();
        }
        function rightSnake() {
            currentX++;
            snakeRef.style.left = currentX + 'px';
            checkLimit();
        }

        
        // function which is check limits
        function checkLimit() {
            // game area width and height
            const areaWidth = gameArea.clientWidth;
            const areaHeight = gameArea.clientHeight;
            // snak img width and height
            const snakWidth = snakeRef.clientWidth;
            const snakHeight = snakeRef.clientHeight;

            // when snack touch outer lines
            if(currentX < 0 ||  currentX+snakWidth > areaWidth || currentY < 0 || currentY+snakHeight > areaHeight) {
                life--;
                document.getElementById("countLife").innerHTML = life;
                if(life == 0) {
                    document.querySelector(".gameZoneDiv").innerHTML = `
                        <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOTNmZW1tN3lueHo4dDV2dDJsNThtNHI1OGt1MXoxNXg4bWtzaHhxOSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/NwsyhEwo8qPp6MZ776/giphy.gif" 
                            style="width:100%; height:100%; object-fit:contain;">
                    `;

                }
                currentX = (areaWidth-snakWidth)/2;
                currentY = (areaHeight-snakHeight)/2;

                snakeRef.style.left = currentX + 'px';
                snakeRef.style.top = currentY + 'px';
            }

            // food imge width and height
            const foodWidth = foodRef.clientWidth;
            const foodHeight = foodRef.clientHeight;
            // when snake eats banana
            if(foodX < currentX+snakWidth && foodX+foodWidth > currentX && foodY < currentY+snakHeight && foodY+foodHeight > currentY) changePositionOfFood();
        }

        function changePositionOfFood() {
            score++;
            document.getElementById("countScore").innerHTML = score;
            foodX = (Math.random())*(gameArea.clientWidth - foodRef.clientWidth);
            foodY = (Math.random())*(gameArea.clientHeight - foodRef.clientHeight);
            
            foodRef.style.left = foodX + 'px';
            foodRef.style.top = foodY + 'px';
        }
    </script>
</body>
</html>
